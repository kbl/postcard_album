<% content_for :head do %>
  <%= stylesheet_link_tag 'default', 'shadowbox' %>
  <%= javascript_include_tag 'shadowbox', :cache => true %>
  <%= javascript_include_tag 'http://maps.google.com/maps?file=api&v=2&key=ABQIAAAAkgCxzvIpiJvYgOSyqIcUrBTWWMYKP7J82jUjllpaxquYJgrbrBQ5wBmh8LFqk2w_zzmkps4hMATjdw&hl=pl' %>
  <script>
    Shadowbox.init(
      { skipSetup: true}, 
      function() {
        Shadowbox.setup(
          'a.lightbox', 
          { gallery: 'postcards',
            continuous: true})
    });
  </script>
<% end %>
<p>
  <b>name:</b>
  <%=h p.name %>
</p>

<p>
  <b>description:</b>
  <%= p.description %>
</p>

<p>
  <b>photo date:</b>
  <%=h p.photo_date %>
</p>

<div id="shadowbox">
  <% p.images.each do |i| %>
    <% link_to i.image.url(i.normal_style), :class => 'lightbox', :rel => 'shadowbox' do %>
      <%= image_tag i.image.url(i.thumbnail_style) %>
    <% end %>
  <% end %>
</div>

<div id="map"></div>
<script type="text/javascript">
  //<![CDATA[
  if (GBrowserIsCompatible()) { 
    var map = new GMap2(document.getElementById("map"));
    map.addControl(new GLargeMapControl());
    map.addControl(new GMapTypeControl());
    latLng = new GLatLng(<%= p.latitude %>, <%= p.longitude %>)
    map.setCenter(latLng, 16);
    map.enableScrollWheelZoom(); 
    map.addOverlay(new GMarker(latLng));
  }
  else {
    alert("Sory batory, nowsza przeglądarka się kłania!");
  }
  //]]>
</script>
